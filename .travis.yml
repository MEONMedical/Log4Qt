language: cpp
dist: focal
compiler: gcc
os: linux
addons:
  apt:
    packages: [ 'ninja-build', 'cmake' ]

env:
- QT_VERSION=qt512 QT_PPA=qt-5.12.9
- QT_VERSION=qt514 QT_PPA=qt-5.14.2
- QT_VERSION=qt515 QT_PPA=qt-5.15.0

before_install:
- sudo add-apt-repository --yes ppa:beineri/opt-$QT_PPA-focal
- sudo apt-get update -qq
- export SRC_DIR="`pwd`"

install:
    - sudo apt-get -y install ${QT_VERSION}base

script:
    - $CXX --version
    - . /opt/$QT_VERSION/bin/$QT_VERSION-env.sh
    - mkdir "$TRAVIS_BUILD_DIR/build-cmake"
    - cd "$TRAVIS_BUILD_DIR/build-cmake"
    - pwd
    - qmake "$SRC_DIR"
    - make
    - make check

#-script:
#    - $CXX --version
#    - cmake --version
#    - mkdir "$TRAVIS_BUILD_DIR/build-cmake"
#    - cd "$TRAVIS_BUILD_DIR/build-cmake"
#    - pwd
#    - cmake -Dstdlib=libstdc++ -GNinja "$SRC_DIR"
#    - ninja -v
